(this["webpackJsonpbag-of-holding"]=this["webpackJsonpbag-of-holding"]||[]).push([[0],{578:function(e,t){},580:function(e,t){},593:function(e,t){},595:function(e,t){},623:function(e,t){},625:function(e,t){},626:function(e,t){},631:function(e,t){},633:function(e,t){},652:function(e,t){},664:function(e,t){},667:function(e,t){},684:function(e,t,n){"use strict";n.r(t);var a=n(6),c=n(30),r=n(0),i=n.n(r),o=n(19),j=n.n(o),s=n(9),u=n(474),b=n(277),d=n(711),f=n(722),O=n(721),l=n(724),h=n(717),m=n(62),x=n(715),p=n(94),v=n.n(p),g=n(175),w=n.n(g),S=n(185),I=n.n(S),C=n(176),R=n.n(C),k=n(183),P=n.n(k),y=n(113),D=n.n(y),T=n(112),_=n.n(T),L=n(177),N=n.n(L),A=n(178),E=n.n(A),F=n(180),z=n.n(F),q=n(181),G=n.n(q),B=n(182),U=n.n(B),J=n(186),V=n.n(J),H=n(179),M=n.n(H),Y=n(184),K=n.n(Y),Q=n(187),W=n.n(Q),X=n(473),Z=n.n(X).a.create({baseURL:"https://handy-haversack.herokuapp.com/api/"}),$=n(725),ee=i.a.createContext(null),te={Add:Object(r.forwardRef)((function(e,t){return Object(a.jsx)(w.a,Object(s.a)(Object(s.a)({},e),{},{ref:t}))})),Check:Object(r.forwardRef)((function(e,t){return Object(a.jsx)(R.a,Object(s.a)(Object(s.a)({},e),{},{ref:t}))})),Clear:Object(r.forwardRef)((function(e,t){return Object(a.jsx)(_.a,Object(s.a)(Object(s.a)({},e),{},{ref:t}))})),Delete:Object(r.forwardRef)((function(e,t){return Object(a.jsx)(N.a,Object(s.a)(Object(s.a)({},e),{},{ref:t}))})),DetailPanel:Object(r.forwardRef)((function(e,t){return Object(a.jsx)(D.a,Object(s.a)(Object(s.a)({},e),{},{ref:t}))})),Edit:Object(r.forwardRef)((function(e,t){return Object(a.jsx)(E.a,Object(s.a)(Object(s.a)({},e),{},{ref:t}))})),Export:Object(r.forwardRef)((function(e,t){return Object(a.jsx)(M.a,Object(s.a)(Object(s.a)({},e),{},{ref:t}))})),Filter:Object(r.forwardRef)((function(e,t){return Object(a.jsx)(z.a,Object(s.a)(Object(s.a)({},e),{},{ref:t}))})),FirstPage:Object(r.forwardRef)((function(e,t){return Object(a.jsx)(G.a,Object(s.a)(Object(s.a)({},e),{},{ref:t}))})),LastPage:Object(r.forwardRef)((function(e,t){return Object(a.jsx)(U.a,Object(s.a)(Object(s.a)({},e),{},{ref:t}))})),NextPage:Object(r.forwardRef)((function(e,t){return Object(a.jsx)(D.a,Object(s.a)(Object(s.a)({},e),{},{ref:t}))})),PreviousPage:Object(r.forwardRef)((function(e,t){return Object(a.jsx)(P.a,Object(s.a)(Object(s.a)({},e),{},{ref:t}))})),ResetSearch:Object(r.forwardRef)((function(e,t){return Object(a.jsx)(_.a,Object(s.a)(Object(s.a)({},e),{},{ref:t}))})),Search:Object(r.forwardRef)((function(e,t){return Object(a.jsx)(K.a,Object(s.a)(Object(s.a)({},e),{},{ref:t}))})),SortArrow:Object(r.forwardRef)((function(e,t){return Object(a.jsx)(I.a,Object(s.a)(Object(s.a)({},e),{},{ref:t}))})),ThirdStateCheck:Object(r.forwardRef)((function(e,t){return Object(a.jsx)(V.a,Object(s.a)(Object(s.a)({},e),{},{ref:t}))})),ViewColumn:Object(r.forwardRef)((function(e,t){return Object(a.jsx)(W.a,Object(s.a)(Object(s.a)({},e),{},{ref:t}))}))};function ne(){var e=Object(r.useState)([]),t=Object(c.a)(e,2),n=t[0],i=t[1],o=Object(r.useState)(!1),j=Object(c.a)(o,2),s=j[0],u=j[1],b=Object(r.useState)([]),d=Object(c.a)(b,2),f=d[0],O=d[1];Object(r.useEffect)((function(){Z.get("/items").then((function(e){i(e.data.data)})).catch((function(e){O(["Cannot load item data",e.error]),u(!0)}))}),[]);var l=[{title:"id",field:"id",hidden:!0},{title:"Item name",field:"name"},{title:"Type",field:"type"},{title:"Rarity",field:"rarity"},{title:"Cost",field:"cost",type:"numeric"}];return Object(a.jsx)(ee.Consumer,{children:function(e){var t=e.loggedIn;return Object(a.jsx)("div",{className:"App",children:Object(a.jsxs)(x.a,{container:!0,spacing:1,children:[Object(a.jsx)(x.a,{item:!0,xs:2}),Object(a.jsxs)(x.a,{item:!0,xs:12,sm:8,children:[Object(a.jsx)("div",{children:s&&Object(a.jsx)($.a,{severity:"error",children:f.map((function(e,t){return Object(a.jsx)("div",{children:e},t)}))})}),Object(a.jsx)(v.a,{title:"Defined Items",columns:l,data:n,icons:te,editable:{onRowUpdate:t?function(e,t){return new Promise((function(a){!function(e,t,a){var c=[];void 0===e.name&&c.push("Please enter item name"),void 0===e.type&&c.push("Please enter item type"),void 0===e.rarity&&c.push("Please enter rarity"),(void 0===e.cost||e.cost<0)&&c.push("Please enter a proper cost"),c.length<1?Z.patch("/items/"+e.id,e).then((function(a){var c=Object(m.a)(n);c[t.tableData.id]=e,i(Object(m.a)(c)),u(!1),O([])})).catch((function(e){O(["Update failed! Server error"]),u(!0)})):(O(c),u(!0))}(e,t),a()}))}:null,onRowAdd:t?function(e){return new Promise((function(t){!function(e,t){var a=[];void 0===e.name&&a.push("Please enter item name"),void 0===e.type&&a.push("Please enter item type"),void 0===e.rarity&&a.push("Please enter rarity"),(void 0===e.cost||e.cost<0)&&a.push("Please enter a proper cost"),a.length<1?Z.post("/items",e).then((function(t){var a=Object(m.a)(n);e.id=t.data.data.id,a.push(e),i(a),O([]),u(!1)})).catch((function(e){O(["Cannot add data. Server error!"]),u(!0)})):(O(a),u(!0))}(e),t()}))}:null,onRowDelete:t?function(e){return new Promise((function(t){!function(e,t){Z.delete("/items/"+e.id).then((function(t){var a=Object(m.a)(n),c=e.tableData.id;a.splice(c,1),i(Object(m.a)(a))})).catch((function(e){O(["Delete failed! Server error"]),u(!0)}))}(e),t()}))}:null},options:{actionsColumnIndex:-1}})]}),Object(a.jsx)(x.a,{item:!0,xs:3})]})})}})}var ae=n(126),ce=n(140),re=n.n(ce),ie=n(242),oe=n(382),je=n(726),se=n(719),ue=n(720),be=n(98),de=n(386),fe=n(385),Oe=Object(fe.a)((function(e){return{root:{height:"100%"},top:{display:"flex",flexDirection:"row"},mergecard:{flexDirection:"column",height:"100%"},gold:{paddingTop:"10px"}}}));function le(){var e=Oe(),t=Object(r.useState)([]),n=Object(c.a)(t,2),i=n[0],o=n[1],j=Object(r.useState)([]),u=Object(c.a)(j,2),b=u[0],d=u[1],f=Object(r.useState)([]),O=Object(c.a)(f,2),l=O[0],h=O[1],p=Object(r.useState)([]),g=Object(c.a)(p,2),w=g[0],S=g[1],I=Object(r.useState)({}),C=Object(c.a)(I,2),R=C[0],k=C[1],P=Object(r.useState)({}),y=Object(c.a)(P,2),D=y[0],T=y[1],_=Object(r.useState)([]),L=Object(c.a)(_,2),N=L[0],A=L[1],E=Object(r.useState)(!1),F=Object(c.a)(E,2),z=F[0],q=F[1],G=Object(r.useState)([]),B=Object(c.a)(G,2),U=B[0],J=B[1],V=function(e){for(var t=[],n=[],a=0;a<e.length;a++){var c=e[a];c.consumed?t.push(c):n.push(c)}o(n),d(t),function(e,t){var n=[e.reduce((function(e,t){return e+(t.Item.cost*t.count||0)}),0)],a=[t.reduce((function(e,t){return e+(t.Item.cost*t.count||0)}),0)];A(Number(n)+Number(a)/2)}(n,t)},H=function(){var e=Object(ie.a)(re.a.mark((function e(t,n){return re.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:T(n);case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),M=function(e,t){if(e.character_id!==D.id)return J(["Delete failed! Character ID doesn't match Inventory ID"]),void q(!0);var n={character_id:e.character_id,item_id:e.item_id},a="";a=!0===t?"/consume/":"/sell/",Z.post(a,n,{headers:{authorization:"bearer "+window.localStorage.getItem("authToken")}}).then((function(n){if(t)V(n.data.data),q(!1);else{var a=Object(m.a)(i);if(e.count--,0===e.count){var c=e.tableData.id;a.splice(c,1),V(Object(m.a)(a))}}})).catch((function(e){J(["Delete failed! Server error",e.error]),q(!0)}))};Object(r.useEffect)((function(){if(null==D||0===Object.keys(D).length&&D.constructor===Object)return J(["Please Select a Character"]),void q(!0);Z.get("/inventory/"+D.id,{headers:{authorization:"bearer "+window.localStorage.getItem("authToken")}}).then((function(e){V(e.data.data)})).catch((function(e){J(["Cannot load inventory data"]),q(!0)}))}),[D]),Object(r.useEffect)((function(){var e=!0;return e&&q(!1),J([]),Z.get("/names/").then((function(e){h(e.data.items)})).catch((function(e){J(["Cannot load item names"]),q(!0)})),Z.get("/characters/",{headers:{authorization:"bearer "+window.localStorage.getItem("authToken")}}).then((function(e){S(e.data.data),T(e.data.data[0])})).catch((function(e){J(["Cannot load character names"]),q(!0)})),function(){return e=!1}}),[]);var Y=[{title:"id",field:"id",hidden:!0},{title:"user_id",field:"user_id",hidden:!0},{title:"item_id",field:"user_id",hidden:!0},{title:"Item Name",field:"Item.name"},{title:"Cost",field:"Item.cost",type:"numeric"},{title:"Count",field:"count",type:"numeric"}];return Object(a.jsx)("div",{className:"App",children:Object(a.jsxs)(x.a,{container:!0,spacing:1,children:[Object(a.jsx)(x.a,{item:!0,sm:12,md:2}),Object(a.jsx)(x.a,{item:!0,xs:12,sm:6,md:4,children:Object(a.jsx)(se.a,{className:e.mergecard,children:Object(a.jsxs)(ue.a,{children:[Object(a.jsx)(je.a,{id:"character-selection",value:D,options:w,getOptionLabel:function(e){return e.name},onChange:H,renderInput:function(e){return Object(a.jsx)(oe.a,Object(s.a)(Object(s.a)({},e),{},{label:"Character",variant:"outlined"}))}}),Object(a.jsxs)(be.a,{variant:"h5",className:e.gold,children:["Inventory Cost: ",N," gp"]})]})})}),Object(a.jsx)(x.a,{item:!0,xs:12,sm:6,md:4,children:Object(a.jsx)(se.a,{className:e.root,children:Object(a.jsx)(ue.a,{children:Object(a.jsxs)(x.a,{container:!0,spacing:2,children:[Object(a.jsx)(x.a,{item:!0,xs:12,sm:12,md:7,children:Object(a.jsx)(je.a,{id:"purchase-selection",options:l,getOptionLabel:function(e){return e.Name},onChange:function(e,t){k(t)},renderInput:function(e){return Object(a.jsx)(oe.a,Object(s.a)(Object(s.a)({},e),{},{label:"Item to purchase",variant:"outlined"}))}})}),Object(a.jsx)(x.a,{item:!0,xs:12,sm:12,md:5,children:Object(a.jsx)(de.a,{variant:"contained",onClick:function(){if(0===Object.keys(R).length&&R.constructor===Object)return J(["Please Select an Item"]),void q(!0);if(0===Object.keys(D).length&&D.constructor===Object)return J(["Please Select a Character"]),void q(!0);var e={character_id:D.id,item_id:R.ID};Z.post("/buy/",e,{headers:{authorization:"bearer "+window.localStorage.getItem("authToken")}}).then((function(e){V(e.data.data),q(!1)})).catch((function(e){J(["Cannot purchase Item"]),q(!0)}))},children:"Purchase"})})]})})})}),Object(a.jsx)(x.a,{item:!0,sm:1}),Object(a.jsx)(x.a,{item:!0,sm:1,md:2}),Object(a.jsxs)(x.a,{item:!0,sm:12,md:8,children:[Object(a.jsx)("div",{children:z&&Object(a.jsx)($.a,{severity:"error",children:U.map((function(e,t){return Object(a.jsx)("div",{children:e},t)}))})}),Object(a.jsx)(v.a,{title:"Items Owned",columns:Y,data:i,editable:{onRowDelete:function(e){return new Promise((function(t){M(e,!1),t()}))}},actions:[{icon:"emoji_food_beverage",tooltip:"Consume Item",onClick:function(e,t){return new Promise((function(e){M(t,!0),e()}))}}],options:{actionsColumnIndex:-1}})]}),Object(a.jsx)(x.a,{item:!0,xs:1}),Object(a.jsx)(x.a,{item:!0,sm:1,md:2}),Object(a.jsx)(x.a,{item:!0,sm:12,md:8,children:Object(a.jsx)(v.a,{title:"Items Consumed",columns:Y,data:b,options:{actionsColumnIndex:-1}})})]})})}var he=n(718),me=n(374),xe=n(310),pe=n(574);var ve=function(){var e=Object(r.useContext)(ee).setLoggedIn;Object(r.useEffect)((function(){var t=!0,n=localStorage.getItem("authToken");if(null===n)return t&&e(!1),function(){return t=!1};var a=pe.decode(n,{complete:!0}),c=new Date;return a.exp<c.getTime()&&t&&e(!0),function(){return t=!1}}),[e]);var t=function(e){console.log(e)},n=function(t){window.localStorage.setItem("authToken",t.tokenObj.id_token),function(e){var t=1e3*(e.tokenObj.expires_in||3300),n=function(){var a=Object(ie.a)(re.a.mark((function a(){var c;return re.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,e.reloadAuthResponse();case 2:c=a.sent,t=1e3*(c.expires_in||3300),localStorage.setItem("authToken",c.id_token),setTimeout(n,t);case 6:case"end":return a.stop()}}),a)})));return function(){return a.apply(this,arguments)}}();setTimeout(n,t)}(t),e(!0)},c=function(t){window.localStorage.removeItem("authToken"),e(!1)};return Object(a.jsx)(ee.Consumer,{children:function(e){var r=e.loggedIn;return Object(a.jsx)("div",{children:r?Object(a.jsx)(xe.GoogleLogout,{clientId:"1090301103642-op1uhu99i3naegpk86siaqqf4nddn0c1.apps.googleusercontent.com",buttonText:"Logout",onLogoutSuccess:c,onFailure:t,theme:"dark"}):Object(a.jsx)(xe.GoogleLogin,{clientId:"1090301103642-op1uhu99i3naegpk86siaqqf4nddn0c1.apps.googleusercontent.com",buttonText:"Login",onSuccess:n,onFailure:t,cookiePolicy:"single_host_origin",isSignedIn:!0,theme:"dark"})})}})},ge=Object(fe.a)((function(e){return{root:{flexGrow:1},title:{flexGrow:1}}}));function we(){var e=ge();return Object(a.jsx)("div",{className:e.root,children:Object(a.jsx)(he.a,{position:"static",children:Object(a.jsxs)(me.a,{children:[Object(a.jsx)(be.a,{variant:"h6",className:e.title,children:"Bag of Holding"}),Object(a.jsx)(ve,{})]})})})}var Se={Add:Object(r.forwardRef)((function(e,t){return Object(a.jsx)(w.a,Object(s.a)(Object(s.a)({},e),{},{ref:t}))})),Check:Object(r.forwardRef)((function(e,t){return Object(a.jsx)(R.a,Object(s.a)(Object(s.a)({},e),{},{ref:t}))})),Clear:Object(r.forwardRef)((function(e,t){return Object(a.jsx)(_.a,Object(s.a)(Object(s.a)({},e),{},{ref:t}))})),Delete:Object(r.forwardRef)((function(e,t){return Object(a.jsx)(N.a,Object(s.a)(Object(s.a)({},e),{},{ref:t}))})),DetailPanel:Object(r.forwardRef)((function(e,t){return Object(a.jsx)(D.a,Object(s.a)(Object(s.a)({},e),{},{ref:t}))})),Edit:Object(r.forwardRef)((function(e,t){return Object(a.jsx)(E.a,Object(s.a)(Object(s.a)({},e),{},{ref:t}))})),Export:Object(r.forwardRef)((function(e,t){return Object(a.jsx)(M.a,Object(s.a)(Object(s.a)({},e),{},{ref:t}))})),Filter:Object(r.forwardRef)((function(e,t){return Object(a.jsx)(z.a,Object(s.a)(Object(s.a)({},e),{},{ref:t}))})),FirstPage:Object(r.forwardRef)((function(e,t){return Object(a.jsx)(G.a,Object(s.a)(Object(s.a)({},e),{},{ref:t}))})),LastPage:Object(r.forwardRef)((function(e,t){return Object(a.jsx)(U.a,Object(s.a)(Object(s.a)({},e),{},{ref:t}))})),NextPage:Object(r.forwardRef)((function(e,t){return Object(a.jsx)(D.a,Object(s.a)(Object(s.a)({},e),{},{ref:t}))})),PreviousPage:Object(r.forwardRef)((function(e,t){return Object(a.jsx)(P.a,Object(s.a)(Object(s.a)({},e),{},{ref:t}))})),ResetSearch:Object(r.forwardRef)((function(e,t){return Object(a.jsx)(_.a,Object(s.a)(Object(s.a)({},e),{},{ref:t}))})),Search:Object(r.forwardRef)((function(e,t){return Object(a.jsx)(K.a,Object(s.a)(Object(s.a)({},e),{},{ref:t}))})),SortArrow:Object(r.forwardRef)((function(e,t){return Object(a.jsx)(I.a,Object(s.a)(Object(s.a)({},e),{},{ref:t}))})),ThirdStateCheck:Object(r.forwardRef)((function(e,t){return Object(a.jsx)(V.a,Object(s.a)(Object(s.a)({},e),{},{ref:t}))})),ViewColumn:Object(r.forwardRef)((function(e,t){return Object(a.jsx)(W.a,Object(s.a)(Object(s.a)({},e),{},{ref:t}))}))};function Ie(){var e=Object(r.useState)([]),t=Object(c.a)(e,2),n=t[0],i=t[1],o=Object(r.useState)(!1),j=Object(c.a)(o,2),s=j[0],u=j[1],b=Object(r.useState)([]),d=Object(c.a)(b,2),f=d[0],O=d[1];Object(r.useEffect)((function(){Z.get("/characters/",{headers:{authorization:"bearer "+window.localStorage.getItem("authToken")}}).then((function(e){i(e.data.data)})).catch((function(e){O(["Cannot load character data"]),u(!0)}))}),[]);return Object(a.jsx)("div",{className:"App",children:Object(a.jsxs)(x.a,{container:!0,spacing:1,children:[Object(a.jsx)(x.a,{item:!0,xs:2}),Object(a.jsxs)(x.a,{item:!0,xs:12,sm:8,children:[Object(a.jsx)("div",{children:s&&Object(a.jsx)($.a,{severity:"error",children:f.map((function(e,t){return Object(a.jsx)("div",{children:e},t)}))})}),Object(a.jsx)(v.a,{title:"Your Characters",columns:[{title:"id",field:"id",hidden:!0},{title:"Character name",field:"name"}],data:n,icons:Se,editable:{onRowAdd:function(e){return new Promise((function(t){!function(e,t){var a=[];void 0===e.name&&a.push("Please enter character name"),a.length<1?Z.post("/characters/",e,{headers:{authorization:"bearer "+window.localStorage.getItem("authToken")}}).then((function(t){var a=Object(m.a)(n);e.id=t.data.data.id,a.push(e),i(a),O([]),u(!1)})).catch((function(e){O(["Cannot add data. Server error!"]),u(!0)})):(O(a),u(!0))}(e),t()}))},onRowDelete:function(e){return new Promise((function(t){!function(e,t){Z.delete("/characters/"+e.id,{headers:{authorization:"bearer "+window.localStorage.getItem("authToken")}}).then((function(t){var a=Object(m.a)(n),c=e.tableData.id;a.splice(c,1),i(Object(m.a)(a))})).catch((function(e){O(["Delete failed! Server error"]),u(!0)}))}(e),t()}))}},options:{actionsColumnIndex:-1,search:!1}})]}),Object(a.jsx)(x.a,{item:!0,xs:3})]})})}var Ce=Object(ae.a)({palette:{type:"dark"}});function Re(){var e=i.a.useState(0),t=Object(c.a)(e,2),n=t[0],r=t[1],o=function(e,t){r(t)};function j(e){var t=e.children,n=e.value,c=e.index,r=Object(u.a)(e,["children","value","index"]);return Object(a.jsx)("div",Object(s.a)(Object(s.a)({},r),{},{children:n===c&&Object(a.jsx)(b.a,{p:3,children:t})}))}return Object(a.jsxs)(d.a,{theme:Ce,children:[Object(a.jsx)(f.a,{}),Object(a.jsx)(we,{}),Object(a.jsx)(O.a,{children:Object(a.jsx)(ee.Consumer,{children:function(e){var t=e.loggedIn;return Object(a.jsxs)(l.a,{value:n,onChange:o,children:[Object(a.jsx)(h.a,{label:"Items"}),Object(a.jsx)(h.a,{label:"Inventory",disabled:!t}),Object(a.jsx)(h.a,{label:"Characters",disabled:!t})]})}})}),Object(a.jsx)(j,{value:n,index:0,children:Object(a.jsx)(ne,{})}),Object(a.jsx)(j,{value:n,index:1,children:Object(a.jsx)(le,{})}),Object(a.jsx)(j,{value:n,index:2,children:Object(a.jsx)(Ie,{})})]})}var ke=function(e){e&&e instanceof Function&&n.e(6).then(n.bind(null,1100)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,r=t.getLCP,i=t.getTTFB;n(e),a(e),c(e),r(e),i(e)}))},Pe=function(){var e=Object(r.useState)(!1),t=Object(c.a)(e,2),n=t[0],o=t[1];return Object(a.jsx)(ee.Provider,{value:{loggedIn:n,setLoggedIn:o},children:Object(a.jsx)(i.a.StrictMode,{children:Object(a.jsx)(Re,{})})})};j.a.render(Object(a.jsx)(Pe,{}),document.getElementById("root")),ke()}},[[684,1,2]]]);
//# sourceMappingURL=main.00442077.chunk.js.map